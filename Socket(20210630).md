# 2021-06-30

# Socket
socket: 네트워크상에서 동작하는 프로그램 간 통신의 종착점(Endpoint), 프로그램이 네트워크에서 데이터를 통신할 수 있도록 연결해주는 연결부이다. 프로세스가 데이터를 읽기위해서는 반드시 소켓을 열어서 소켓에 데이터를 써보내거나 소켓으로부터 데이터를 읽어들여야한다.

# Serever.c
클라이언트 소켓의 연결 요청을 대기하고, 연결 요청이 오면 클라이언트 소켓을 생성하여 통신이 가능하게 한다.

<과정>
1) Socket() 함수를 이용하여 소켓을 생성
2) bind() 함수로 ip와 port 번호를 설정
3) listen() 함수로 클라이언트의 접근 요청에 수신 대기열을 만들어 몇 개의 클라이언트를 대기 시킬지 결정
4) accept() 함수를 사용하여 클라이언트와의 연결을 기다림

*listen().  
-연결 요청 대기.   
-리턴값: 성공 시 0, 실패 시 -1.      
listen() 호출이 성공하면 모든 연결 요청(클라이언트들의) 서버가 미리 만들어 놓은 대기실(waiting queue)로 들어가 순서대로 연결요청이 수락될 때까지 기다린다.  

*bind().  
소켓에 주소, 프로토콜, 포트를 할당함. 
listen(), connect() 함수의 호출 전에 사용됨, 연결되지 않은 소켓을 필요로 함. 

*accept().  
int accept(int sockfd, struct sockaddr* addr, socklent_t *addrlen);     
해당 소켓에 연결 요청이 왔을 때 연결을 받아들이는 함수.      
첫번째 인자는 연결을 기다리는 소켓 디스크립터.      
두번째 인자는 받아들인 Client 주소 및 포트 정보가 저장될 구조체의 주소값.      
세번째 인자는 sockaddr 구조체의 길이가 저장된 변수의 주소값.      
해당 소켓으로의 연결 요청이 없는 경우, 클라이언트가 연결을 요청할 때까지 소켓의 대기상태를 유지함. 

# Client.c
실제로 데이터의 송수신이 일어나는 것

1) socket() 함수로 가장 먼저 소켓을 연다.
2) connect() 함수를 이용하여 통신할 서버의 설정된 ipdhk port 번호에 통신을 시도한다.
3) 통신을 시도할 때 accept() 함수를 이용하여 클라이언트의 socket descriptor를 반환한다.

# TIF
-여럿이서 코드 리뷰를 하여 내가 잘못 이해했거나 틀리게 알고있던 부분들을 알 수 있었다. 그래서 빠르게 개념을 다시 잡을 수 있어서 매우 좋은 방법인 것 같다.   
-오늘 배웠던 소켓이 복잡하고 낯설어서 이해하기 어려웠고 반복해서 공부해야 할 필요성을 느꼈다.



